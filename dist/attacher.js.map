{"version":3,"file":"attacher.js","sources":["../../AppData/Roaming/npm/node_modules/rollup-plugin-postcss/node_modules/style-inject/dist/style-inject.es.js","../src/attacher.js"],"sourcesContent":["function styleInject(css, ref) {\n  if ( ref === void 0 ) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') { return; }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nexport default styleInject;\n","/**\n * Attacher Styles\n */\nimport './attacher.scss';\n\n/**\n * @class Attacher\n */\nexport default class Attacher {\n  /**\n   * Pass arguments to class properties.\n   * @constructor\n   * @arg {Element} reference element.\n   * @arg {Element} target element.\n   * @arg {Boolean} debug mode.\n   * @arg {Float} transition seconds.\n   * @arg {Float} focusIndex\n   * @arg {String} posPriority (\"top\", \"bottom\", \"center\") of target.\n   * @arg {Object} padding of reference to target.\n   * @arg {Object} bPadding padding of boundary.\n   * @arg {Float} watchRefreshSeconds of attacher.\n   */\n  constructor(reference, {\n    target = null,\n    autoActivate = false,\n    debug = false,\n    styles: {\n      transition = 1,\n      focusIndex = 10,\n    } = {},\n    posPriority = 'bottom',\n    padding: {\n      x: paddingX = 10,\n      y: paddingY = 20,\n    } = {},\n    bPadding: {\n      x: bPaddingX = 25,\n      y: bPaddingY = 50,\n    } = {},\n    watchRefreshSeconds = .5,\n  }) {\n    if (debug) console.warn('attacher component created.', this);\n\n    /**\n     * Set up global properties.\n     */\n    this.reference = reference;\n    this.target = target;\n    this.debug = debug;\n    this.autoActivate = autoActivate;\n    this.focusIndex = focusIndex;\n    this.posPriority = posPriority;\n    this.transition = transition;\n    this.paddingX = paddingX;\n    this.paddingY = paddingY;\n    this.bPaddingX = bPaddingX;\n    this.bPaddingY = bPaddingY;\n    this.forcedPosPriority = false;\n    this.watchRefreshSeconds = watchRefreshSeconds;\n    this.windowWidth = window.innerWidth;\n\n    /**\n     * Bind reference to target if target exists.\n     */\n    if (target) this.bind(target);\n\n    this.watchBlurEvents();\n  }\n\n  /**\n   * Binds reference element to target element.\n   * @arg {Element} target could be a new target element.\n   */\n  bind(target) {\n    this.target = target;\n    this.setStyles();\n\n    if (this.autoActivate) {\n      setTimeout(() => {\n        this.activate(true);\n      }, 100);\n    }\n\n\n    if (this.debug) console.log(`Attacher bind method fired.`);\n  }\n\n  /**\n   * Unbinds reference element from target element.\n   */\n  unbind() {\n    if (this.debug) console.log(`Attacher unbind method fired.`);\n\n    this.resetStyles();\n    this.target = undefined;\n\n    this.deactivate();\n  }\n\n  /**\n   * Make reference visible. Start watching.\n   * @arg {Boolean} transition\n   */\n  activate(transition = false) {\n    this.switchFocus();\n    this.refresh();\n\n    if (transition) setTimeout(this.setTransitionStyle, 100);\n\n    this.startWatch();\n  }\n\n  /**\n   * Make reference invisible. Stop watching.\n   */\n  deactivate() {\n    this.reference.style.transition = '';\n    this.reference.style.left = '';\n\n    this.stopWatch();\n  }\n\n  /**\n   * Switch focus function\n   */\n  switchFocus() {\n    document.dispatchEvent(new CustomEvent('blurAttacher'));\n    this.reference.style.zIndex = this.focusIndex;\n  }\n\n  /**\n   * Set up reference element's styles.\n   */\n  setStyles() {\n    this.reference.style.position = 'absolute';\n    this.reference.style.zIndex = 1;\n  }\n\n  /**\n   * Clear reference element's styles.\n   */\n  resetStyles() {\n    this.reference.style.position = '';\n    this.reference.style.zIndex = '';\n    this.reference.style.transition = '';\n    this.reference.style.left = '';\n    this.reference.style.top = '';\n  }\n\n  /**\n   * Set reference and content's default transition\n   * @arg {Element} reference\n   * @arg {Float} transition\n   */\n  setTransitionStyle(\n      reference = this.reference,\n      transition = this.transition,\n  ) {\n    reference.style.transition = `${transition}s`;\n  }\n\n  /**\n   * Unset reference and content's default transition\n   * @arg {Element} reference\n   * @arg {Element} content\n   */\n  unsetTransitionStyle(\n      reference = this.reference,\n      content = this.content,\n  ) {\n    reference.style.transition = '';\n  }\n\n  /**\n   * Refresh position of reference element.\n   * It is the function to reposition reference element.\n   */\n  refresh() {\n    if (this.target == undefined) {\n      if (this.debug) {\n        console.warn(`Attacher can't refresh. Target is undefined.`);\n      }\n      return;\n    }\n\n    this.setPosition(this.getPosition());\n  }\n\n  /**\n   * Decide new position according to window size and priority.\n   * @return {Object} new position of target element.\n   */\n  getPosition() {\n    const coords = this.target.getBoundingClientRect();\n    const positionX = this.offsetPositionX(coords.left + window.scrollX);\n    const positionY = this.offsetPositionY(coords.top + window.scrollY);\n    this.targetPosY = positionY;\n\n    return {\n      left: positionX,\n      top: positionY,\n    };\n  }\n\n  /**\n   * Set position of reference element.\n   * @arg {Object} position of reference element.\n   */\n  setPosition(position) {\n    this.reference.style.left = `${position.left}px`;\n    this.reference.style.top = `${position.top}px`;\n    this.reference.style.transform = '';\n  }\n\n  /**\n   * check if X axis is out of border.\n   * @arg {FLoat} position of target in x-axis.\n   * @return {Float} X distance between reference and target.\n   */\n  offsetPositionX(position) {\n    const newPosition = position - (this.reference.offsetWidth / 2) +\n    (this.target.offsetWidth / 2);\n\n    /**\n     * Check if reference is out-of-bounds.\n     */\n    const bodyWidth = window.innerWidth;\n\n    if (newPosition + this.reference.offsetWidth +\n      this.paddingX > bodyWidth) {\n      if (this.debug) console.log('Reference bleeds from right.');\n      return bodyWidth - this.reference.offsetWidth - this.paddingX;\n    }\n\n    if (newPosition - this.paddingX < 0) {\n      if (this.debug) console.log('Reference bleeds from left.');\n      return 0 + this.paddingX;\n    }\n\n    return newPosition;\n  }\n\n  /**\n   * Calculate Y distance first.\n   * Check if Y distance is out of boundary.\n   * If out of boundary. Recalculate Y distance.\n   * @arg {Float} position of target in y-axis.\n   * @return {Float} Y distance between reference and target.\n   */\n  offsetPositionY(position) {\n    let newPosition = this.repositionPivotY(position);\n\n    switch (this.checkBleedingY(newPosition)) {\n      case 'top':\n        newPosition = this.repositionPivotY(position, 'bottom');\n        break;\n\n      case 'bottom':\n        newPosition = this.repositionPivotY(position, 'top');\n        break;\n    }\n\n    return newPosition;\n  }\n\n  /**\n  * Calculate position priority of reference element.\n  * @arg {Float} position of target in y-axis.\n  * @arg {String} posPriority position priority.\n  * @return {Float} Y distance between reference and target.\n   */\n  repositionPivotY(position, posPriority = this.posPriority) {\n    let newPosition = 0;\n\n    switch (posPriority) {\n      case 'center':\n        newPosition = position;\n        break;\n\n      case 'top':\n        newPosition = position - this.reference.offsetHeight - this.paddingY;\n        break;\n\n      case 'bottom':\n        newPosition = position + this.target.offsetHeight + this.paddingY;\n        break;\n    }\n\n    return newPosition;\n  }\n\n  /**\n   * Check if target position is out-of-bounds in y-axis.\n   * @arg {Float} position of target in y-axis.\n   * @return {Boolean | String} the bleeding position of reference.\n   * false for no bleeding.\n   */\n  checkBleedingY(position) {\n    const topBoundary = window.scrollY;\n    const refTopBoundary = position - this.bPaddingY;\n\n    if (topBoundary >= refTopBoundary ) {\n      if (this.debug) console.log('Reference bleeds from top.');\n      this.forcedPosPriority = 'bottom';\n      return 'top';\n    }\n\n    const bottomBoundary = topBoundary + window.innerHeight;\n    const refBottomBoundary = position +\n    this.reference.offsetHeight + this.bPaddingY;\n\n    if (refBottomBoundary > bottomBoundary) {\n      if (this.debug) console.log('Reference bleeds from bottom.');\n      this.forcedPosPriority = 'top';\n      return 'bottom';\n    }\n\n    this.forcedPosPriority = false;\n\n    return false;\n  }\n\n  /**\n   * Watch Global Events\n   */\n  watchBlurEvents() {\n    document.addEventListener('blurAttacher', this.blurAttacher = () => {\n      this.reference.style.zIndex = 1;\n      if (this.debug) console.log('blurAttacher event fired.');\n    });\n  }\n\n  /**\n   * Listen document scroll change.\n   */\n  startWatch() {\n    /**\n     * Check if event listeners assigned.\n     */\n    if (this.eventListenersCreated) return;\n\n    /**\n     * Refresh reference element when the user scrolls the page.\n     */\n    document.addEventListener('scroll', this.scrollWatcher = () => {\n      if (!this.sleepMode) this.autoRefresh();\n      this.switchToSleepMode();\n    }, {passive: true});\n\n    /**\n     * Refresh when window object resized by the user.\n     */\n    window.addEventListener('resize', this.resizeWatcher = () => {\n      if (this.windowWidth == window.innerWidth) return;\n\n      if (this.debug) console.warn('Document resized.');\n\n      this.reference.style.display = 'none';\n      this.resetStyles();\n\n      setTimeout(() => {\n        this.reference.style.display = '';\n        this.setStyles();\n        this.refresh();\n      }, 100);\n\n      setTimeout(() => {\n        this.setTransitionStyle();\n      }, 200);\n\n      this.windowWidth = window.innerWidth;\n\n      if (this.debug) console.warn('new screen width set to default');\n    });\n\n    this.eventListenersCreated = true;\n\n    if (this.debug) console.warn('attacher started watching.');\n  }\n\n  /**\n   * Stop listening scroll and resize events.\n   */\n  stopWatch() {\n    document.removeEventListener('scroll', this.scrollWatcher);\n    window.removeEventListener('resize', this.resizeWatcher);\n\n    this.eventListenersCreated = false;\n\n    if (this.debug) console.warn('attacher stopped watching.');\n  }\n\n  /**\n   * Auto refreshes attacher on scroll event.\n   */\n  autoRefresh() {\n    if (this.checkBleedingTimer) return;\n\n    if (this.forcedPosPriority == this.checkBleedingY(this.targetPosY)) {\n      return;\n    };\n\n    if (this.debug) console.log('Refresh requested.');\n\n    setTimeout(() => {\n      this.checkBleedingTimer = false;\n      this.refresh();\n\n      if (this.debug) console.log('Refreshed.');\n    }, this.watchRefreshSeconds * 1000);\n\n    this.checkBleedingTimer = true;\n  }\n\n  /**\n   * Whether to switch sleep mode for watch.\n   */\n  switchToSleepMode() {\n    if (window.scrollY >\n      this.reference.offsetTop + this.reference.offsetHeight ||\n      this.reference.offsetTop > window.scrollY + window.innerHeight\n    ) {\n      if (this.debug && this.sleepMode == false) {\n        console.warn('attacher switched to sleep mode.');\n      }\n\n      this.sleepMode = true;\n\n      return;\n    }\n\n    if (this.debug && this.sleepMode == true) {\n      console.warn('attacher switched off sleep mode.');\n    }\n\n    this.sleepMode = false;\n  }\n};\n"],"names":["styleInject","css","ref","insertAt","document","head","getElementsByTagName","style","createElement","type","firstChild","insertBefore","appendChild","styleSheet","cssText","createTextNode","Attacher","reference","target","autoActivate","debug","styles","transition","focusIndex","posPriority","padding","x","paddingX","y","paddingY","bPadding","bPaddingX","bPaddingY","watchRefreshSeconds","console","warn","forcedPosPriority","windowWidth","window","innerWidth","bind","watchBlurEvents","setStyles","setTimeout","activate","log","resetStyles","undefined","deactivate","switchFocus","refresh","setTransitionStyle","startWatch","left","stopWatch","dispatchEvent","CustomEvent","zIndex","position","top","content","setPosition","getPosition","coords","getBoundingClientRect","positionX","offsetPositionX","scrollX","positionY","offsetPositionY","scrollY","targetPosY","transform","newPosition","offsetWidth","bodyWidth","repositionPivotY","checkBleedingY","offsetHeight","topBoundary","refTopBoundary","bottomBoundary","innerHeight","refBottomBoundary","addEventListener","blurAttacher","eventListenersCreated","scrollWatcher","sleepMode","autoRefresh","switchToSleepMode","passive","resizeWatcher","display","removeEventListener","checkBleedingTimer","offsetTop"],"mappings":"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"}